# JAVA代码细节 - 可变参数(Varargs)

[[toc]]

> 说在前面的话，本文为日常积累的一些`Java`相关代码细节积累。	

## 【1】基本概念

可变参数(`Variable Arguments`)是Java 5引入的特性，允许方法接受‌**零个或多个**‌指定类型的参数。

语法格式：

```java
public void methodName(dataType... variableName) {
    // 方法体
}
```

## 【2】核心特性

- <b>三个点(...)</b> 表示可变参数
-  可变参数在方法内部作为‌**数组**‌处理
-  必须是方法的‌**最后一个参数**‌
- 一个方法只能有‌**一个**‌可变参数

## 【3】使用示例

### 3.1 基础用法

```java
public static int sum(int... numbers) {
    int total = 0;
    for (int num : numbers) {
        total += num;
    }
    return total;
}

// 调用方式
sum(1, 2, 3);    // 返回6
sum(5, 10);      // 返回15
sum();           // 返回0
```

### 3.2 与其他参数配合

```java
public static void printInfo(String prefix, String... items) {
    System.out.print(prefix + ": ");
    for (String item : items) {
        System.out.print(item + " ");
    }
    System.out.println();
}

// 调用
printInfo("Fruits", "Apple", "Banana", "Orange");
```

## 【4】注意事项

- **重载问题**‌：可变参数方法可能造成方法重载歧义
-  ‌**性能考虑**‌：频繁调用会创建多个数组对象
-  ‌**null处理**‌：传入null时需要特别处理
-  ‌**类型安全**‌：编译器不会检查所有参数类型是否一致

## 【5】最佳实践

- 优先使用集合类型(如List)替代可变参数（当API稳定性重要时）
- 添加清晰的文档说明参数要求
- 考虑提供重载方法优化常见用例
-  对可变参数进行非空检查

## 【6】实际应用场景

1. 日志工具类方法
2. 字符串拼接/格式化
3. 数学计算工具类
4. 测试断言方法
5. 命令行参数处理

## 【7】与数组参数的区别

| 特性       | 可变参数         | 数组参数               |
| ---------- | ---------------- | ---------------------- |
| 调用语法   | 可直接传多个值   | 必须包装成数组         |
| 空参数     | 允许不传参数     | 必须显式传null或空数组 |
| 方法内部   | 当作数组处理     | 本身就是数组           |
| 重载优先级 | 低于固定参数方法 | 与普通方法同级         |

## 【8】扩展知识

Java编译器对可变参数的处理实际上是：

```java
// 源代码
void method(String... strs);

// 编译后等价于
void method(String[] strs);
```

最新Java版本(17+)中，可变参数可以与`@SafeVarargs`注解配合使用，消除泛型可变参数的警告。

## 【9】日常开发注意事项

> - 可变参数：作用提供了一个方法，参数的个数是可变的 ,解决了部分方法的重载问题
>   - int...num
>   -  double...num
>   -  boolean...num
> - 可变参数在JDK1.5之后加入的新特性
> - 方法的内部对可变参数的处理跟数组是一样
> - 可变参数和其他数据一起作为形参的时候，可变参数一定要放在最后
> - 我们自己在写代码的时候，建议不要使用可变参数。
> - 1个方法最多只有1个可变参数

